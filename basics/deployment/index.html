<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>freistilbox docs - Deployment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="screen">
  <link href="/style.css" rel="stylesheet" type="text/css" media="screen">
  <link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
  <meta name="generator" content="nanoc 3.5.0"> 
</head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">

      <div class="span2">
        <div id="sidebar">
          <ul>
            <li><a href="/">Home</a></li>
          </ul>
          <h2>Main sections</h2>
          <ul>
            <li><a href="/basics/">freistilbox Basics</a></li>
            <li><a href="/start/">Getting Started</a></li>
            <li><a href="/advanced/">Advanced Usage</a></li>
          </ul>
          <h2>External links</h2>
          <ul>
            <li><a href="http://support.freistil.it">Help Center</a></li>
            <li><a href="https://freistil.zendesk.com/forums/21512451-FAQ">FAQ</a></li>
            <li><a href="http://www.freistilbox.com/">freistilbox</a></li>
            <li><a href="http://www.freistil.it/">freistil IT</a></li>
          </ul>
        </div>
      </div>

      <div class="span10">
        <div id="main">
          <ul class="breadcrumb">
            
            
            <li><a href="/">Home</a></li> <span class="divider">/</span>
            
            <li><a href="/basics/">freistilbox Basics</a></li> <span class="divider">/</span>
            
            <li class="active">Deployment</li>
          </ul>
          <div id="content">
            <h1 id="central-deployment">Central deployment</h1>

<p>Distributing your web application code on the multiple nodes of a freistilbox cluster will work only if it is installed completely identical on all cluster nodes at all times. Inconsistencies, for example in the form of different code revisions, will result in website behaviour that would at least confuse your visitors or, in the worst case, break your website. </p>

<p>To avoid these problems, we provide a centralized deployment process. You need to upload your changes only once; our infrastructure then takes care of distributing them to all affected boxes within seconds.</p>

<h2 id="version-control-with-git">Version control with Git</h2>

<p>Updating distributed services from a central code base is the ideal task for modern version control systems. We chose Git for that purpose.</p>

<p>Every freistilbox website instance has its own central Git repository that stores its Drupal installation. From this central repository, all the webservers responsible for delivering your site update their local Drupal environment after every change you upload. Technically speaking, they clone the central repository.</p>

<h2 id="git-repository-structure">Git repository structure</h2>

<p>The Git repository should contain the following items in its root directory:</p>

<ul>
  <li>the subdirectory <code>docroot</code> with your web application code,</li>
  <li>a file named <code>Boxfile</code> which controls deployment behaviour,</li>
  <li>and a hidden file named <code>.gitignore</code>.</li>
</ul>

<p>We’re going to explain these files and directories in detail below.</p>

<h3 id="docroot">docroot</h3>

<p>The <code>docroot</code> directory contains the code base of your web application, for example a Drupal distribution. It will be used as document root by our webservers.</p>

<p><span class="label label-important">Important</span> <code>docroot</code> should only contain application code! Make sure not to put files in there that need to be updated by your application, for example Drupal’s <code>sites/default/files</code> directory. These should be in a shared folder, as defined in the Boxfile.</p>

<h3 id="boxfile">Boxfile</h3>

<p>Because the Boxfile documentation needs a bit more space, we’ve put it on a separate page: <a href="boxfile.html">Boxfile</a></p>

<h3 id="gitignore">.gitignore</h3>

<p>Your <code>.gitignore</code> file should at least contain the following entries:</p>

<pre><code>/config
/private
/tmp
</code></pre>

<p>You should also exclude directories that need to be shared between boxes, for example:</p>

<pre><code>/docroot/sites/*/files
</code></pre>

<p>To avoid accidental checkins, we recommend you also exclude environment-specific files like</p>

<pre><code>/docroot/.htaccess
/docroot/.htpasswd
</code></pre>

          </div>
        </div>
      </div>
      
    </div>
  </div>

</body>
</html>

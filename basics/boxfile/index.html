<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>freistilbox docs - The Boxfile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="screen">
  <link href="/style.css" rel="stylesheet" type="text/css" media="screen">
  <link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
  <meta name="generator" content="nanoc 3.5.0"> 
</head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">

      <div class="span2">
        <div id="sidebar">
          <ul>
            <li><a href="/">Home</a></li>
          </ul>
          <h2>Main sections</h2>
          <ul>
            <li><a href="/basics/">freistilbox Basics</a></li>
            <li><a href="/start/">Getting Started</a></li>
            <li><a href="/advanced/">Advanced Usage</a></li>
            <li><a href="/faq/">FAQ</a></li>
          </ul>
          <h2>External links</h2>
          <ul>
            <li><a href="http://support.freistil.it">Help Center</a></li>
            <li><a href="http://www.freistilbox.com/">freistilbox</a></li>
            <li><a href="http://www.freistil.it/">freistil IT</a></li>
          </ul>
        </div>
      </div>

      <div class="span10">
        <div id="main">
          <ul class="breadcrumb">
            
            
            <li><a href="/">Home</a></li> <span class="divider">/</span>
            
            <li><a href="/basics/">freistilbox Basics</a></li> <span class="divider">/</span>
            
            <li class="active">The Boxfile</li>
          </ul>
          <div id="content">
            <h1 id="the-boxfile">The Boxfile</h1>

<p>The Boxfile is a file of the same name that is stored in the root directory of a single web application’s repository. It defines attributes that control the deployment process.</p>

<p>The format of the Boxfile is YAML.</p>

<p>Your website repository doesn’t necessarily contain a Boxfile from the start. So, if you need one or more of the features described below, simply create one.</p>

<p><span class="label label-important">Important</span> The file name is case-sensitive. Please make sure that it starts with a capital “B”.</p>

<p>Here is some example content for a Boxfile. It first defines a shared folder whose contents need to be available on all web boxes. Then, it lists a set of configuration files that are stored in the repository and need to be activated depending on the staging environment that is assigned to the website.</p>

<pre><code>version: 1.0
shared_folders:
  - sites/default/files
env_specific_files:
  .htaccess:
    production: .htaccess.production
    test: .htaccess.test
  .htpasswd:
    production: .htpasswd.production
    test: .htpasswd.test
  sites/default/settings.php:
    production: settings.production.php
    test: settings.test.php
</code></pre>

<h2 id="shared-folders">Shared folders</h2>

<p>Shared folders are part of the application code space but need to be shared between all application servers of a cluster since they are writable by the web application.</p>

<p>Public shared folders are defined in a shared_folders collection as a list of paths, relative to the application’s document root:</p>

<pre><code>shared_folders:
  - sites/default/files
  - sites/www.example.com/files
</code></pre>

<p><span class="label label-info">Info</span> Private shared folders can be directly created via SFTP/SSH in the docroot/private folder and are available to the web application below the path <code>../private</code> relative to the application’s document root.</p>

<h2 id="environment-specific-files">Environment-specific files</h2>

<p>Environment-specific files are configuration files contained in the repository that are used only in a specific staging environment. This enables you to use a common code base both for a testing website instance and for production. You put the configuration files for both environments, for example the application’s database credentials, into the repository and define them as environment-specific. Our deployment process then chooses the right configuration file for the right environment.</p>

<p>In the following example, our deployment will create a symbolic link named <code>.htaccess</code> and has it point either to <code>.htaccess.production</code> or <code>.htaccess.test</code>, depending on which website instance the repository is deployed. The same happens for <code>.htpasswd</code> and <code>sites/default/settings.php</code>.</p>

<pre><code>env_specific_files:
  .htaccess:
    production: .htaccess.production
    test: .htaccess.test
  .htpasswd:
    production: .htpasswd.production
    test: .htpasswd.test
  sites/default/settings.php:
    production: settings.production.php
    test: settings.test.php
</code></pre>

          </div>
        </div>
      </div>
      
    </div>
  </div>

</body>
</html>

<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>freistilbox docs - Filesystem structure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="screen">
  <link href="/style.css" rel="stylesheet" type="text/css" media="screen">
  <link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
  <meta name="generator" content="nanoc 3.6.4">
</head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">

      <div class="span2">
        <div id="sidebar">
          <ul>
            <li><a href="/">Home</a></li>
          </ul>
          <h2>Main sections</h2>
          <ul>
            <li><a href="/basics/">freistilbox Basics</a></li>
            <li><a href="/start/">Getting Started</a></li>
            <li><a href="/advanced/">Advanced Usage</a></li>
            <li><a href="/faq/">FAQ</a></li>
            <li><a href="/solo/">freistilbox Solo</a></li>
          </ul>
          <h2>External links</h2>
          <ul>
            <li><a href="http://support.freistil.it">Help Center</a></li>
            <li><a href="http://www.freistilbox.com/">freistilbox</a></li>
            <li><a href="http://www.freistil.it/">freistil IT</a></li>
          </ul>
        </div>
      </div>

      <div class="span10">
        <div id="main">
          <ul class="breadcrumb">
            
            
            <li><a href="/">Home</a></li> <span class="divider">/</span>
            
            <li><a href="/basics/">freistilbox Basics</a></li> <span class="divider">/</span>
            
            <li class="active">Filesystem structure</li>
          </ul>
          <div id="content">
            <h1 id="filesystem-structure">Filesystem structure</h1>

<h2 id="limited-write-permissions">Limited write permissions</h2>

<p>Since all web application installations on our infrastructure are cloned from a central Git repository, we have to prevent changes being made directly on the server. There are multiple reasons for that.</p>

<p>Changing a file directly on the server would</p>

<ol>
  <li>cause a permanent conflict with the version in the Git repository. This would then cause any further deployment attempts to fail and make tech support necessary. (Some of our early customers know this problem from experience…)</li>
  <li>destroy version consistency throughout the cluster, because the other cluster nodes would not reflect that local change.</li>
</ol>

<p>There is no reliable way of feeding local changes back into the central repository. That’s why we don’t allow web applications any write access to their own distribution files. All changes to your application code need to come from the central Git repository.</p>

<p>Of course, changes to asset files (by way of file uploads or by the ImageCache module, for example) must be possible. On our freistilbox hosting platform, write access is limited to its <em>public and private file system paths</em> and the <em>temporary directory</em>.</p>

<h2 id="shared-storage">Shared storage</h2>

<p>Because asset files saved by your application need to be available to all freistilbox nodes, they are stored on a central storage cluster. Your application, on the other hand, is stored locally on each freistilbox (for performance reasons).</p>

<p>That’s why you need to tell freistilbox which directories in your application file tree should be shared between boxes. With Drupal as an example, you’d declare <code>sites/default/files</code> as shared. You do this in your application’s <a href="boxfile/">Boxfile</a>.</p>

<p>For storage of asset files that need to be protected from direct access by HTTP clients, freistilbox provides the directory <code>../private</code>, relative to your application’s <code>docroot</code>. Like the public asset file folders you’ve defined by your <code>Boxfile</code>, this directory is also stored on the central storage cluster.</p>

<h2 id="temporary-files">Temporary files</h2>

<p>If your application creates temporary files (during uploads, for example), please use the path <code>../tmp</code>, relative to your application’s <code>docroot</code>. This directory is created automatically.</p>

          </div>
        </div>
      </div>

    </div>
  </div>

</body>
</html>
